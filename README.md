##关于这个仓库
> 前些年刚开始了解SAAS结构的时候,客观认为这个结构只有企业资源在极不平衡的情况下才会采用的架构方案,这两年观点有些改变，因为资源不平衡是中国当前中小企业的现状。

> 在这个时间周期里,国内也涌现了一大批优秀的SAAS提供商. 比如主流一些内容付费产品。

> 这个仓库第一个版本在13年建立,最初是寻求简单的方式可以单应用动态切换MYSQL的数据库。既然想达到动态，就需要直面数据连接回收、连接覆盖、负载均衡等问题。

> 在技术高速发展的今天,已然有了更优秀的方式.

> 这个仓库继续用于探索. 代码只提供参考.


## saas-mycat

> 这是15年选择的预研方案,程序框架采用了spring、doubbo、mycat、mysql.

> 整体方案采用mycat做为数据路由,由spring应用在执行SQL前加入mycat的路由注解。以达到数据库动态切换的目的.

> 但是在实践过程中,发现mycat的框架体系把结构化数据库的事务性完全丢失，还包括MYSQL的存储过程无法得到有效满足.

> 所以整个应用只有doubbo的上下文传递线程变量还存在一些参考价值.

## saas-mongo

> 近期采用的SAAS结构.
> 依赖于mongodb API的高度扩展与可用,加上spring boot/spring data mongo底层采用了netty实现，在数据连接管理上已完美实现动态切换。

> 所以我们简单实现了通过线程变量传递DB NAME,并重写掉mongoTemplate，此组件具有了以下功能提供参考。

- mongo docment 可任意加字段读出写入.实际上是重写映射结构.
- 可配合前端域名动态切换数据库.
- 注解式实现mongodb在自增主键上的缺陷.

